% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gldp_to_dwc.R
\name{gldp_to_dwc}
\alias{gldp_to_dwc}
\title{Transform a GeoLocator Data Package to Darwin Core}
\usage{
gldp_to_dwc(package, directory, path_type = "most_likely")
}
\arguments{
\item{package}{A GeoLocator Data Package object.}

\item{directory}{Path to local directory to write file(s) to.
If \code{NULL}, then a data frame is returned instead, which can be useful
for extending/adapting the Darwin Core mapping before writing with
\code{\link[readr:write_delim]{readr::write_csv()}}.}

\item{path_type}{The type of path to use for the occurrence data.
One of \code{"most_likely"}, \code{"mean_simulation"}, \code{"median_simulation"}, or
\code{"geopressureviz"}. For simulation types, the mean or median position
(lat/lon) is calculated for each \code{tag_id}-\code{stap_id} combination across
all simulated paths. Defaults to \code{"most_likely"}. See \link{paths} for more details.}
}
\value{
\code{occurrence.csv} file written to disk.
Invisibly, an occurrence data frame.
}
\description{
Transforms a \href{https://raphaelnussbaumer.com/GeoLocator-DP/}{GeoLocator Data Package}
to a \href{https://dwc.tdwg.org/}{Darwin Core Archive}.
The resulting CSV files can be uploaded to an \href{https://www.gbif.org/ipt}{IPT}
for publication to GBIF. A \code{meta.xml} file is included as well.
See \code{\link[=gldp_to_eml]{gldp_to_eml()}} to create an \code{eml.xml} file.
}
\section{Transformation details}{

Data are transformed into an \href{https://rs.gbif.org/core/dwc_occurrence}{Occurrence core}.
This transformation combines data from three resources:
\itemize{
\item \href{https://raphaelnussbaumer.com/GeoLocator-DP/core/tags/}{\code{tags}}: metadata about the device and deployment
\item \href{https://raphaelnussbaumer.com/GeoLocator-DP/geopressurer/staps/}{\code{staps}}: stationary periods with temporal information
\item \href{https://raphaelnussbaumer.com/GeoLocator-DP/geopressurer/paths/}{\code{paths}}: spatial positions estimated for each stationary period
}

The following terms are set from the package metadata:
\itemize{
\item \code{datasetName}: Title as provided in \code{package$title}.
\item \code{datasetID}: Identifier as provided in \code{package$id}.
\item \code{rightsHolder}: Rights holder as provided in \code{package$contributors}
(contributor with \code{"rightsHolder"} role). If no rightsHolder role is found,
this field will be \code{NA}.
\item \code{license}: License name as provided in \code{package$licenses}.
}

Key features of the Darwin Core transformation:
\itemize{
\item Stationary periods (\code{staps}) are treated as events, with each position
as an occurrence representing the bird's location during that period.
\item Each occurrence represents one stationary period from the path data,
filtered by \code{path_type}.
\item The \code{eventDate} is expressed as an ISO 8601 interval
(\code{start/end}) representing the duration of the stationary period.
\item \code{basisOfRecord} is set to \code{"MachineObservation"} as data are derived
from automated geolocator sensors.
\item \code{samplingProtocol} is set to \code{"geolocator"}.
\item \code{geodeticDatum} is \code{"EPSG:4326"} (WGS84).
\item \code{scientificName} is taken from \code{tags$scientific_name}.
\item \code{organismID} is set to \code{ring_number} to track individual birds across
multiple observations and deployments.
\item \code{occurrenceID} is a unique identifier combining \code{tag_id} and \code{stap_id}.
\item \code{individualCount} is set to \code{1}.
\item \code{occurrenceStatus} is set to \code{"present"}.
\item \code{sex} and \code{lifeStage} are included if available in the \code{tags} resource.
\item \code{coordinateUncertaintyInMeters} is calculated for simulation path types
(\code{"mean_simulation"} or \code{"median_simulation"}) as the 95th percentile of
the distance between each simulation and the aggregated center.
}
}

